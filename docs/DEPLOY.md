# Deploying Campaign Copilot to GitHub Pages

This guide explains two supported deployment methods for this project:

- Automatic deploy via GitHub Actions (recommended)
- Manual / local deploy using `gh-pages` and a Personal Access Token (PAT)

Prerequisites
- Node.js 18+ (Node 20 recommended)
- npm
- A GitHub repository named `campaign-copilot` under your user/organization

Quick checks before deploying
- `vite.config.ts` sets `base: '/campaign-copilot/'` which is required for GitHub Pages.
- Ensure the repo `main` branch contains the source; `gh-pages` will contain the built site.

Automatic deploy (GitHub Actions) — recommended

1. Commit and push your changes to `main`:

```powershell
git add .
git commit -m "Prepare CI deploy to GitHub Pages"
git push origin main
```

2. GitHub Actions will run the `build-and-deploy` workflow (see `.github/workflows/deploy.yml`).
   - It performs `npm ci`, `npm run build`, then uses `peaceiris/actions-gh-pages` to publish `./dist` to the `gh-pages` branch.
   - No PAT is required for Actions (the workflow uses `secrets.GITHUB_TOKEN`).

3. Monitor the workflow under the repository → Actions. If the job succeeds the site will be published to:

```
https://<your-github-username>.github.io/campaign-copilot/
```

Manual / local deploy (useful for one-off deploys)

1. Build the site locally:

```powershell
npm install
npm run build
```

2. Publish `dist/` to the `gh-pages` branch using the convenience script:

```powershell
# Provide your PAT for the session (replace <YOUR_PAT>)
$env:GH_TOKEN = '<YOUR_PAT>'
npm run deploy
```

- `npm run deploy` runs `npx gh-pages -d dist -b gh-pages` which will push the built files to `gh-pages`.
- If you prefer not to set `GH_TOKEN`, authenticate with the GitHub CLI first:

```powershell
gh auth login
npm run deploy
```

Troubleshooting
- 404 or blank page after deploy:
  - Wait 1–5 minutes for GitHub Pages to activate.
  - Confirm the `gh-pages` branch exists and contains `index.html` and `assets/`.
  - Check repo Settings → Pages that the source is `gh-pages` branch.

- Action build failure:
  - Open the Actions run, inspect the failing step logs (Install / Build / Deploy), and paste the errors here for help.

- Git auth errors when using `npm run deploy`:
  - Ensure `GH_TOKEN` is set to a PAT with `public_repo` (for public repos) or `repo` (for private).
  - Alternatively authenticate with `gh auth login` before running the script.

What I can do next
- After you push, paste any failing Actions logs here and I will diagnose and fix them.
- If you prefer, run the local deploy and paste any errors you get; I’ll help remedy them.

---
Generated by your assistant to make deploying this Vite app to GitHub Pages straightforward.
